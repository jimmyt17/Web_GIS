<html>
<head>
<title>Thorburn Lab04</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
<script src="https://skeate.dev/Leaflet.timeline/examples/leaflet.timeline.js"></script>
<style>
html,
body {
margin: 0;
padding: 0;
}
#map {
width: 100vw;
height: 100%;
}
.leaflet‐bottom.leaflet‐left {
width: 100%;
}
.leaflet‐control‐container .leaflet‐timeline‐controls {box-sizing: border‐box;
width: 100%;
margin: 0;
margin-bottom: 25px;
}
</style>
</head>
<body>
<div id="map"></div>
<script>
function getColorFor(value) {
  return value >= 15 ? '#3182bd' :
         value >= 10 ? '#9ecae1' :
         value >= 5 ? '#deebf7' :
         value >= 0 ? '#ffffbf' :
         value >= -5 ? '#fee0d2' :
         value >= -10 ? '#fc9272' :
         value <= -15 ? '#de2d26' :
         '#b2182b';
}
var background = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',
  {
    attribution: '&copy; OpenStreetMap & Carto',
    subdomains: 'abcd',
    maxZoom: 20
  }
);
var map = L.map("map", {
layers: [background],
center: new L.LatLng(38, -95),
zoom: 5,
});
var timeline;
var timelineControl;
function onLoadData(data) {
timeline = L.timeline(data, {
style: function (data) {
return {
color: getColorFor(data.properties.DIFF),
fillOpacity: 0.9,
};
},
waitToUpdateMap: true,
onEachFeature: function (feature, layer) {
layer.bindTooltip('<h3>'+ feature.properties.NAME + '</h3> <p>' + '<br>Biden: <strong>' + feature.properties.DEM + '</strong> <br>Trump: <strong>' +
feature.properties.REP + '</strong></p>');
},
});
timelineControl = L.timelineSliderControl({
formatOutput: function (date) {
return new Date(date).toLocaleDateString();
},
enableKeyboardControls: true,
});
timeline.addTo(map);
timelineControl.addTo(map);
timelineControl.addTimelines(timeline);
}
</script>
<script src="https://electionmaps.github.io/statepolls5.jsonp"></script>
</body>
</html>